<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Musice power by Vue</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<!-- 	<script src="https://unpkg.com/vue/dist/vue.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.4"></script> -->
	<script src="vue.js"></script>
	<script src="vue-resource@1.3.4"></script>
	<script src="jquery-1.7.min.js"></script>
	<script src="progress/nprogress.js"></script>
	<link rel="stylesheet" href="progress/nprogress.css">
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/style.css">
	<script type="text" id="splash-template">
    <div class="splash card">
        <div role="spinner">
            <div class="spinner-icon"></div>
        </div>
        <p class="lead" style="text-align:center">不要回来，马上走开...</p>
        <div class="progress">
            <div class="mybar" role="bar">
            </div>
        </div>
    </div>
  </script>
</head>
<body>
	<div class="progress" id="progress">
		<div class="onload" id="onload"></div>
	</div>
	<!-- <iframe src="https://www.github.com/" frameborder="0" width="50px" height="60px"></iframe> -->

	<div id="app">
		<div class="wrapper clearfix">
			<div v-if="this.song"> Song返回总数: {{this.song.result.songCount}}</div>
			<div>
				<h3>音频播放区域</h3>
				<audio  controls autoplay v-if="this.mp3" :src="this.mp3.data[0].url"></audio>
				<ul v-if="this.comments" class="comments">
					<li v-for="(item,index) in this.comments.hotComments">
						<p>用户：{{item.user.nickname}}</p>
						<p>评论：{{item.content}}</p>
					</li>
				</ul>
			</div>

			<ul v-if="this.song">
				<li v-for="(item,index) in this.song.result.songs" id="item.id" @click="searchSong(item.id)">
					<p>{{item.name}}</p>
					<img :src="item.al.picUrl" alt="">
				</li>
			</ul>
		</div>
	</div>

	<script>
		window.onload = function(){
			var app = new Vue({
				el: '#app',
				data: {
					name: '悟空',
					mv: null,
					song: null,
					video: null,
					mp3: null,
					comments: null
				},
				methods: {
					searchSong: function(song_id){
						this.$http.get('https://api.imjad.cn/cloudmusic/?type=song&id='+song_id+'&br=128000&limit=20&t='+new Date()).then((response) => {
							this.mp3 = response.body;
						})
						this.$http.get('https://api.imjad.cn/cloudmusic/?type=comments&id='+song_id+'&br=128000&limit=20&t='+new Date()).then((response) => {
							this.comments = response.body;
							console.log(this.comments);
						})
					},
				},
				created(){
					this.$http.get('https://api.imjad.cn/cloudmusic/?type=search&s='+this.name+'&t='+new Date()).then((response) => {
						this.song = response.body;
					});
				}
			})
		}
	</script>
</body>
</html>